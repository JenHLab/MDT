<!DOCTYPE html>
<meta charset="utf-8">
<head>

<link href='https://fonts.googleapis.com/css?family=Merriweather:400,400italic' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Amiri' rel='stylesheet' type='text/css'>
<style>

body {
  font-family: serif;
  font: 12px;
  padding: 10px;
  margin-top: 2px;
}

h1, h2 {
  font-family: 'Amiri', serif;
}
/* css for annual ridership line graph. For axis css see below stacked bar chart */
circle:hover {
        stroke: gray;
      }

.axis text {
        font-family: sans-serif;
        font-size: 11px;
      }

/*css for stacked bar chart */
#form {
      position: relative;
      right: 10px;
      top: 10px;
      padding-bottom: 20px;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: steelblue;
}

.x.axis path {
  display: none;
}

.axis text {
        font-family: sans-serif;
        font-size: 11px;
      }


.line {
        fill: none;
        stroke: #b3d0f2;
        stroke-width: 1px;
        stroke-opacity: 80%;
}

.line.unfocused{
        stroke-opacity: 40%;
}

.line.focused {
        stroke-width: 2px;
        stroke-opacity: 100%;
        stroke: #0365d4;
}

/* css for map svg*/
path {
  stroke: black;
  fill:none;
}


circle {
  fill: orange;   
}

/* Style for Custom mytooltip for map svgs */
div.mytooltip {
    position: absolute;
    text-align: left;
    min-width: 20px;
    height: 60px;
    padding: 2px;
    font: 12px sans-serif;
    background: #f2f2f2;
    border-radius: 5px;
    pointer-events: none;
}

.mytooltip p {
    margin: 10px;
}

</style>
</head>
<body>
<!-- Introduction to transit modes in Miami-Dade County -->
<div id="introOverview">
    <h1>Miami-Dade Transit (MDT)</h1>
      <p>Miami-Dade Transit (MDT) operates the Metrobus, Metrorail, Metromover and Paratransit (STS). MDT is the largest transit system in Florida and provides an alternative to private vehicles to more than 2.5 million residents in the county.</p>
    <h3>Total Annual Ridership in Miami-Dade County</h3>
  <div id="firstLineChart"></div> 
  </div>

<!-- A look at ridership preferences -->
  <div id="introRidership">
    <h3>Public Transportation Ridership Preferences in Miami-Dade County (October, 2015)</h3>
  <div id="form">
    <label><input type="radio" name="mode" value="bycount" checked><b>Total Ridership</b> (day of the week)</label>
    <label><input type="radio" name="mode" value="bypercent"><b>As Percent of Ridership Preferences</b></label>
  </div>
  <div id="chart"></div>
      <p>The Metrobus is the most popular MDT service.</p>
    <h3>Total Bus Annual Ridership in Miami-Dade County</h3>
  <div id="secondLineChart"></div>   
</div>

<!-- MetroBus -->
<div id="bus"> 
      <p>Metrobus throughout the years </p> 
      <P>[PLACEHOLDER- LINE CHART- annual ridership in total, 2008-2015]</p> 
      <P>[PLACEHOLDER- MULTI-LINE VORONOI- annual individual bus route ridership, 2008-2015]</p>
    <h3>Route Ridership</h3> 
  <div id="voronoiChart"></div> 
    <h4>Metrobus Stations</h4>
      <p>Hover each STOP to see the name of the metrobus station and address.</p>
<div id="metrobusInfo"></div>
</div>

  
<!-- Transit Mode: Metrorail section -->
<div id="rail">
    <h2>Metrorail</h2> 
      <p>(METRORAIL NFORMATION HERE, STATS, ETC.)</p>
    <h4>Metrorail Stations</h4>
      <p>Hover each STOP to see the name of the metrorail station and address.</p>
   <div id="metrorailInfo"></div>  
      <p>PLACEHOLDER- annual ridership, 2008-2011]</p>
</div>

<!-- Transit Mode: Metromover section -->
<div id="mover">
    <h2>Metromover</h2>
      <p>(METROMOVERI NFORMATION HERE, STATS, ETC.)</p>
    
    <h3>Metromover Stations</h3>
      <p>Hover each STOP to see the name of the metromover station and address.</p>
  <div id="metromoverInfo"></div>
      <p>PLACEHOLDER- annual ridership, 2008-2011]</p>
</div>

<!-- Sources -->
<div id="sources">
  <p style="font-size: 14px;">
    <b>Sources:</b> 
      <br>
    <a href="factfinder.census.gov"> American FactFinder</a>. US Census Bureau. 2016.
      <br>
    <a href="http://www.miamidade.gov/transit/home.asp"> Transportation and Public Works</a>. Miami-Dade County. 2016.
      <br>
      <a href="http://www.miamidade.gov/transit/reports-plans.asp"> Ridership Technical Reports</a>. Transportation and Public Workds. Miami-Dade County. 2016.
      <br>
      <a href="http://www.miamidade.gov/transit/reports-plans.asp"> Transportation</a>. Miami-Dade County GIS Open Data. Miami-Dade County. 2016.
      <br>
  </p>
</div>

<script src="//d3js.org/d3.v3.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script src="https://d3js.org/queue.v1.min.js"></script> <!-- queue js -->
<script type="text/javascript" src="js/annualR.js"></script> <!-- Line chart: Ridership over the years -->
<script type="text/javascript" src="js/stackedRidership.js"></script> <!-- Stacked bar: Ridership mode preferences and day of the week ridership -->
<script type="text/javascript" src="js/annual_MetroBus.js"></script> <!-- Line chart: MetroBus ridership over the years -->
<script type="text/javascript" src="js/voronoi.js"></script> <!-- Voronoi: MetroBus route ridership -->
<script type="text/javascript" src="js/busStations.js"></script> <!-- BUS station map -->
<script type="text/javascript" src="js/railStations.js"></script> <!-- MOVER station map -->
<script type="text/javascript" src="js/moverStations.js"></script> <!-- RAIL station map -->
<script type="text/javascript">

//Line chart: Ridership over the years
queue()
  .defer(d3.csv, "data/annual_ridership.csv")
  .await(loadAnnual);

//Stacked bar: Ridership mode preferences and day of the week ridership
queue()
  .defer(d3.csv, "data/total_ridership_2015.csv")
  .await(loadIntroGraph);

//Line chart: Bus ridership over the years
queue()
  .defer(d3.csv, "data/annual_ridership_metroBus.csv")
  .await(loadAnnualBus);

//Line chart: Bus ridership over the years
queue()
  .defer(d3.csv, "data/routeRidership.csv")
  .await(loadVoronoi);

//BUS station map
queue()
  .defer(d3.json, "data/dade.json")
  .defer(d3.csv, "data/bus_stop.csv")
  .await(loadedBus);

//MOVER station map
queue()
  .defer(d3.json, "data/dade.json")
  .defer(d3.csv, "data/Metromover_Stations.csv") // process
  .await(loaded);

//RAIL station map
queue()
  .defer(d3.json, "data/dade.json")
  .defer(d3.csv, "data/Metrorail_Stations.csv") // process
  .await(loadedRail);



</script>
</body>
</html>